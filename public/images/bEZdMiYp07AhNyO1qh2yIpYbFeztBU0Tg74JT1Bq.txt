Система парсинга расположена в директории ~/realty_parser/
Скрипты парсинга расположены в папке ~/realty_parser/services. 
Каждый парсер – отдельный класс который наследует базовый Core из файла. Пример запуска скрипта: /usr/bin/php index.php --p=ria.ua

php index.php --p=ogolosha.com
/usr/bin/php index.php --p=ogolosha.com


Парсеры пишут объявления в базу данных realty_parser. Объявления пишутся (в основном) в таблицу dle_siteparser (кроме баз контактов риелторов).
В объявления обязательно должен быть телефон, иначе объявление бесполезно и будет удалено.
Поле approved должно быть 1. При других значениях объявления сохраняются в БД но не экспортируются дальше.
Есть 5 типов операций Сдают,Продают, Снимают, Покупают, Меняют.
Есть несколько типов объектов “Квартиры”, “Дома”, …. (Можно увидеть в таблице)
Для типа объектов Квартира обязательно нужно (если, конечно, возможно) определить количество комнат. 
Для объявлений Сдают, Продают валюта и цена обязательны.
Часть параметров объектов сохраняются в отдельные колонки таблицы, остальные в колонку extra_fields все вместе,через разделитель. 
В таблицу dle_siteparser_stats пишутся логи запусков парсеров.
Парсеры запускаются кроном. Некоторые парсеры запускаются несколькими потоками (threads – такой параметр есть в некоторых скриптах), которые могут обрабатывать различные области, города, типы объектов. Некоторые (большинство) парсеров отслеживают время и наличие запуска прошлых инстансов через dle_siteparser_stats и автоматически прекращают работу если таковые были (некий ограничитель количества запусков потока).
Все таблицы БД в кодировке cp1251. 
Некоторые парсеры имеют два варианта запуска (определяется доп параметром) – быстрый и полный. Реализовано это если на сайте есть сортировка объявлений по дате. Быстрый – обрабатывает свои объявления пока не наткнется на то что есть в базе. Полный – обрабатывает все. Парсеры пропускают то что уже есть в БД Быстрый вариант на таких объявлениях просто завершается.
У каждого парсера есть $this→website_id код источника. (У РИА он 11).
Часть скриптов (например РИА) работают через прокси (есть платные и бесплатные). Которые собираются и проверяются скриптами из папки ~/realty_parser/services/proxy.loader.php и proxy.checker.php. Сейчас все источники работают в основном по https поэтому к прокси есть доп требования и проверки. Все прокси сохраняются в таблицу proxy. В полях указано живой или нет, время последней проверки, степень анонимности, наличие https, и другое.

Вот так в парсерах включается работа через прокси
$this->http->is_proxy = true;
$this->http->is_secure = true;

Логика работы парсера через прокси построена таким образом:
Выбирается случайный прокси из БД, затем делается несколько попыток получить страницу через этот прокси. Анализируются коды ошибок и http коды и даже в некоторых случаях контент страницы. Если ошибки нет – переходим к обработке страницы. Если есть – делаем еще попытку (через 15-17 сек. Очень часто помогает). Если через 4 попытки страница не получена – меняем прокси.

Адреса в центре некоторых населенных пунктов удаляем. Это делает функция check_center в файле ~/realty_parser/core/Core.php
